data =  [0.5744, 0.7387, 0.1782, 0.5341, 0.124, 0.2477, 0.1652, 0.0353, 0.0158, 0.0158, 0.004]
layer_latency =  [0, 27.2579, 10.1612, 21.7888, 4.3666, 34.2211, 22.0609, 33.0553, 121.3356, 103.923, 24.8342]

x=1:1:21

subplot(1,4,1)
y = [[0.0051, 643.6185, 52.7412];[34.4163, 3455.835, 50.3226];[53.7876, 3459.4297, 52.1106];[102.8439, 861.6553, 46.5211];[98.7256, 860.9631, 46.0104];[112.8013, 859.2508, 45.6109];[136.5885, 864.667, 46.0906];[129.085, 863.8644, 42.6534];[149.7943, 864.1575, 40.7064];[184.1971, 870.75, 38.9012];[189.4747, 867.2031, 40.572];[187.7996, 872.5524, 39.3808];[210.1068, 435.6448, 36.8875];[220.3213, 433.0542, 35.4297];[215.8765, 436.8113, 35.8628];[234.482, 434.5016, 34.1622];[258.0293, 431.4955, 32.8388];[252.9293, 431.2642, 34.049];[266.4725, 433.438, 31.2312];[288.7953, 431.1068, 31.3766];[376.609, 213.9231, 28.4682];[335.9982, 214.7703, 29.7769];[393.449, 214.7791, 25.8592];[395.2569, 214.8017, 27.6344];[437.6204, 214.7386, 23.7901];[435.0578, 214.7165, 23.2325];[443.1364, 214.0087, 25.1669];[470.5381, 214.8747, 22.2644];[505.4159, 107.2407, 18.9396];[513.7799, 107.4049, 17.4129];[488.7728, 109.9651, 15.6156];[519.0524, 107.4733, 12.8901];[564.7109, 107.2883, 9.6181];[628.9488, 107.007, 13.075];[565.3269, 107.2788, 3.4753];[578.7507, 107.2631, 1.8275];[506.621, 2.6745, 0.7571];[465.3914, 0, 0]]
bar(y,'stacked')
ylabel('E2E Latency (ms)','fontsize',18)
xlabel('Cut Point','fontsize',18)
title("(a) 8 Mbps")
legend("Local", "Network", "Remote", 'fontsize',18, 'Interpreter', "latex")
grid on
box on
set(gca,'fontname','Times') 
ax = gca; 
ax.FontSize = 18;
ax.YAxis.Exponent = 2;

subplot(1,4,2)
y = [[0.0092, 246.9985, 39.8157];[40.5914, 1319.1159, 41.4733];[63.9464, 1319.2352, 39.7398];[96.0974, 331.3874, 37.2421];[93.7587, 329.6484, 35.736];[129.9824, 330.0707, 33.588];[146.3107, 328.9811, 32.3756];[157.4905, 329.2378, 33.0667];[161.3136, 331.3758, 32.3522];[194.6941, 332.6802, 31.7578];[212.7024, 333.352, 31.3443];[215.0238, 333.2019, 29.6791];[275.3317, 165.3724, 29.6634];[282.6274, 165.9088, 33.8562];[302.6024, 165.6244, 29.0208];[340.6032, 165.8417, 37.4446];[365.6373, 165.1933, 33.8236];[340.8273, 164.8752, 27.2182];[349.9912, 165.4537, 49.5177];[359.8949, 165.1355, 24.169];[378.2328, 82.3948, 22.2871];[387.8191, 82.3294, 21.5806];[405.6991, 82.7559, 31.5361];[436.1188, 82.5236, 24.4962];[456.5148, 82.7289, 24.8967];[453.9839, 82.4154, 23.6764];[487.1635, 82.2355, 20.1079];[479.3967, 82.4392, 19.8913];[480.9127, 41.2211, 14.6406];[497.5839, 41.4064, 17.8154];[522.102, 41.553, 22.801];[530.0784, 41.6026, 11.3807];[563.3326, 41.5336, 6.9293];[596.8914, 41.4964, 7.8877];[614.7042, 42.0873, 6.6398];[618.4635, 41.3084, 5.2361];[551.492, 1.4353, 3.8224];[484.8211, 0, 0]]
bar(y,'stacked')
ylabel('E2E Latency (ms)','fontsize',18)
xlabel('Cut Point','fontsize',18)
title("(a) 20 Mbps")
legend("Local", "Network", "Remote", 'fontsize',18, 'Interpreter', "latex")
grid on
box on
set(gca,'fontname','Times') 
ax = gca; 
ax.FontSize = 18; 
ax.YAxis.Exponent = 2;

subplot(1,4,3)
y = [[1.176839178e-05, 0.32180925000000005];[0.08550511535658001, 1.7279175];[0.13179077554824, 1.7297148500000001];[0.2819598187131, 0.43082765];[0.2761597896976, 0.43048155000000005];[0.32259022935235, 0.4296254];[0.38802872415690004, 0.43233350000000004];[0.3664958730125, 0.43193220000000004];[0.43192600709286993, 0.43207875];[0.5330494060076701, 0.435375];[0.56757146385, 0.43360155];[0.5515307479381201, 0.4362762];[0.6556838625756001, 0.2178224];[0.6802828172547599, 0.2165271];[0.6669646945989999, 0.21840565];[0.7338468023338, 0.2172508];[0.81322472630387, 0.21574775];[0.7931982230629601, 0.21563210000000002];[0.84398254743075, 0.216719];[0.91242735061827, 0.2155534];[1.2497769664999998, 0.10696155];[1.08211990209804, 0.10738515];[1.30061649032, 0.10738955];[1.299620497476, 0.10740085];[1.4518231818160001, 0.1073693];[1.46309085426712, 0.10735825];[1.478772754984, 0.10700435];[1.58440788904155, 0.10743735];[1.66973619113125, 0.053620350000000004];[1.6877669714999999, 0.05370245];[1.5888374648257602, 0.054982550000000005];[1.6806754767651202, 0.05373665];[1.8246456337691401, 0.05364415];[2.122224198912, 0.0535035];[1.84291379699058, 0.053639400000000004];[1.9018988264750103, 0.05363155];[1.5846766963793, 0.0013372500000000001];[1.39581985098804, 0.0]]
bar(y,'stacked')
ylabel('Energy Consumption (J)','fontsize',18)
xlabel('Cut Point','fontsize',18)
title("(c) 8 Mbps")
legend("Local", "Network", 'fontsize',18, 'Interpreter', "latex")
grid on
box on
set(gca,'fontname','Times') 
ax = gca; 
ax.FontSize = 18;
%ax.YAxis.Exponent = 2;

subplot(1,4,4)
y = [[1.1668125e-05, 0.14453985];[0.09410757883345001, 0.69824835];[0.15608447380770002, 0.69327765];[0.25889591277088, 0.17202375];[0.29411949479, 0.17203075];[0.36876114787277997, 0.17852425];[0.3565117091648, 0.17974610000000002];[0.427280432748, 0.17916495000000002];[0.6186280770817901, 0.1747109];[0.5378242650330001, 0.18113849999999998];[0.585529957635, 0.1796991];[0.59963123369929, 0.1788528];[0.781510995051, 0.0865315];[0.8804949318999001, 0.0863493];[0.93032170851438, 0.08639870000000001];[0.8874201802404299, 0.0865189];[0.9756756256743, 0.08658895];[1.0640769926974, 0.086335];[1.04177502871973, 0.08647334999999999];[1.10375345258583, 0.08644125];[1.19843190517824, 0.0430167];[1.24332283918248, 0.04300065];[1.32911512588184, 0.042949150000000005];[1.17018252371118, 0.04301255];[1.37810667388211, 0.042831299999999996];[1.3783715097163298, 0.0430923];[1.4637848237208, 0.042849649999999996];[1.45779177546648, 0.0432223];[1.4861216851364503, 0.0215606];[1.5487362903236401, 0.021258];[1.53441636602442, 0.021283049999999998];[1.6345347733791202, 0.0213818];[1.90542577376589, 0.02126545];[1.8540602606305001, 0.021255299999999998];[1.9675976064153202, 0.021413599999999998];[2.00475165158226, 0.0212885];[1.42827929253479, 0.00076575];[1.61387700970768, 0.0]]
bar(y,'stacked')
ylabel('Energy Consumption (J)','fontsize',18)
xlabel('Cut Point','fontsize',18)
title("(d) 20 Mbps")
legend("Local", "Network", 'fontsize',18, 'Interpreter', "latex")
grid on
box on
set(gca,'fontname','Times') 
ax = gca; 
ax.FontSize = 18; 
%ax.YAxis.Exponent = 2;

set(gcf,'Position',[500 300 1800 347])
